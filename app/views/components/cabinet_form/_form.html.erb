<div id='cabinet-form' data-controller='form cabinet-form'>
  <%= simple_form_for(@cabinet) do |f| %>
    <%= f.error_notification %>
    <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
    
    <div class='row form-header-container'>
      <h1 class='form-header'>
        <%= @edit ? @cabinet.name : 'New Liquor Cabinet' %>
      </h1>

      <%= f.input :name, label: false, placeholder: 'Name Your Liquor Cabinet', required: true %>
      <%= f.hidden_field :user_id, value: current_user.id  %>

      <div class='text-danger fst-italic'><%= flash[:error] %></div>
    </div>

   
    <div class='row'>
      <% ['Spirit', 'Modifier', 'Sugar', 'Garnish'].each do |ingredient_type| %>
        <div class='col-auto'>
          <h5><%= ingredient_type.pluralize %></h5>
          <table class='ingredient-table'>
            <thead>
              <th><%= ingredient_type %></th>
              <th>Amount</th>
              <th></th>
            </thead>
            <tbody id='<%= ingredient_type.downcase %>-ingredients' class='ingredient-tbody'></tbody>
          </table>
        </div>
      <% end %>
    </div>

    <div class='row'>
      <%= render partial: 'components/cabinet_form/portion_table', locals: { f: f } %>
    </div>

    <div class='row'>
      <div class="form-actions">
        <%= f.button :submit, class: 'btn-sm btn-success' %>
      </div>
    </div>
  <% end %>
</div>
